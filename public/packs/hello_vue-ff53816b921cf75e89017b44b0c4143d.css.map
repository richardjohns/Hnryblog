{"version":3,"file":"hello_vue-ff53816b921cf75e89017b44b0c4143d.css","sources":["webpack:///./app/javascript/app/javascript/app.vue","webpack:///./app/javascript/components/app/javascript/components/list.vue"],"sourcesContent":["<template>\n  <draggable v-model=\"lists\" :options=\"{group: 'lists'}\" class=\"board dragArea\" @end=\"listMoved\">\n    <list v-for=\"(list, index) in lists\" :list=\"list\"></list>\n\n    <div class=\"list\">\n      <a v-if=\"!editing\" v-on:click=\"startEditing\">Add a List</a>\n      <textarea v-if=\"editing\" ref=\"message\" v-model=\"message\" class=\"form-control mb-1\"></textarea>\n      <button v-if=\"editing\" v-on:click=\"submitMessage\" class=\"btn btn-secondary\">Add</button>\n      <a v-if=\"editing\" v-on:click=\"editing=false\">Cancel</a>\n    </div>\n  </draggable>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\"\nimport list from \"components/list\"\n\nexport default {\n  components: { draggable, list }, // gives access to draggable tag above when we render our template.\n  props: [\"original_lists\"],\n  data: function() {\n    return {\n      lists: this.original_lists,\n      editing: false,\n      message: \"\",\n    }\n  },\n  methods: {\n    listMoved: function(event) {\n      var data = new FormData\n      // console.log('This is data before: ',data)\n      console.log('This is listMoved event: ',event)\n      // console.log('This is this.lists: ', this.lists)\n      data.append(\"list[position]\", event.newIndex + 1)\n      // console.log('This is data after: ',data)\n      Rails.ajax({\n        url: `/lists/${this.lists[event.newIndex].id}/move`,\n        type: \"PATCH\",\n        data: data,\n        dataType: \"json\",\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n.dragArea {\n  min-height: 20px; \n}\n\n.board {\n  white-space: nowrap;\n  overflow-x: auto;\n}\n\n</style>\n// makes drag area visible so that you know that you can drop card there\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/app/javascript/app.vue?540aee4e","<template>\n  <div class=\"list\">\n    <h6>{{ list.name }}</h6>\n\n    <draggable v-model=\"list.cards\" :options=\"{group: 'cards'}\" class=\"dragArea\" @change=\"cardMoved\">\n      <card v-for=\"card in list.cards\" :card=\"card\" :list=\"list\"></card>\n    </draggable>\n\n    <a v-if=\"!editing\" v-on:click=\"startEditing\">Add a card</a>\n    <textarea v-if=\"editing\" ref=\"message\" v-model=\"message\" class=\"form-control mb-1\"></textarea>\n    <button v-if=\"editing\" v-on:click=\"submitMessage\" class=\"btn btn-secondary\">Add</button>\n    <a v-if=\"editing\" v-on:click=\"editing=false\">Cancel</a>\n  </div>\n</template>\n\n<script>\nimport draggable from 'vuedraggable'\nimport card from 'components/card'\nexport default {\n  components: { card, draggable },\n  props: [\"list\"],\n  data: function() {\n    return {\n      editing: false,\n      message: \"\"\n    }\n  },\n  methods: {\n    startEditing: function() {\n      this.editing = true\n      this.$nextTick(() => { this.$refs.message.focus() })\n    },\n    cardMoved: function(event) {\n      const evt = event.added || event.moved\n      if (evt == undefined) { return }\n      const element = evt.element\n      const list_index = window.store.lists.findIndex((list) => {\n        return list.cards.find((card) => {\n          return card.id === element.id\n        })\n      })\n      var data = new FormData\n      data.append(\"card[list_id]\", window.store.lists[list_index].id)\n      data.append(\"card[position]\", evt.newIndex + 1)\n      Rails.ajax({\n        url: `/cards/${element.id}/move`,\n        type: \"PATCH\",\n        data: data,\n        dataType: \"json\"\n      })\n    },\n    submitMessage: function() {\n      var data = new FormData\n      data.append(\"card[list_id]\", this.list.id)\n      data.append(\"card[name]\", this.message)\n      Rails.ajax({\n        url: \"/cards\",\n        type: \"POST\",\n        data: data,\n        dataType: \"json\",\n        success: (data) => {\n          const index = window.store.lists.findIndex(item => item.id == this.list.id)\n          window.store.lists[index].cards.push(data)\n          this.message = \"\"\n          this.$nextTick(() => { this.$refs.message.focus() })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dragArea {\n  min-height: 10px;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/components/app/javascript/components/list.vue?33155cb9"],"mappings":";AA+CA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;ACkBA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","sourceRoot":""}